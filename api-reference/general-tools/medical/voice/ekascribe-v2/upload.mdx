---
openapi: "POST /v1/file-upload"
---

### Path Parameters
- `txn_id`: The session ID for which the file is being uploaded.
- `action`: The action to be performed for the file upload, typically "default" or "ekascribe".
### Response:
structured as follows:

```json
"uploadData" : {
    "url" : "https://m-prod-ekascribe-batch.s3.amazonaws.com/",
    "fields" : {
        "x-amz-meta-mode" : "dictation",
        "x-amz-meta-input_language" : [ "en-US" ],
        "key" : "EC_173210496011417/txn_301/20250617_105524/${filename}",
        "x-amz-algorithm" : "<x-amz-algorithm>",
        "x-amz-credential" : "<x-amz-credential>",
        "x-amz-date" : "<x-amz-date>",
        "x-amz-security-token" : "<x-amz-security-token>",
        "x-amz-signature" : "<x-amz-signature>"
    }
},
"folderPath" : "EC_173210496011417/txn_301/20250617_105524/",
"txn_id" : "txn_301"
```
- `url` + `folderPath` in response is the `S3 bucket URL` that is required when [initialize transaction](https://developer.eka.care/api-reference/general-tools/medical/voice/ekascribe-v2/init) to specify where the audio files will be uploaded.

**Example S3 URL:**
```plaintext
https://m-prod-ekascribe-batch.s3.amazonaws.com/EC_173210496011417/txn_301/20250617_105524/
```

## 2. Upload File
#### Sample Python Example to Upload File using Presigned URL

```Python
import requests

# Values from presigned URL response
url = "https://m-prod-ekascribe-batch.s3.amazonaws.com/"
folder_path = "EC_173210496011417/txn_301/20250617_105524/"
filename = "sample_audio.wav"   # Replace with your actual file name
key = folder_path + filename

fields = {
    "x-amz-meta-mode": "dictation",
    "x-amz-meta-input_language": "en-US",
    "key": key,
    "x-amz-algorithm": "<x-amz-algorithm>",
    "x-amz-credential": "<x-amz-credential>",
    "x-amz-date": "<x-amz-date>",
    "x-amz-security-token": "<x-amz-security-token>",
    "policy": "<policy>",
    "x-amz-signature": "<x-amz-signature>",
}

files = {
    "file": open(filename, "rb")
}

response = requests.post(url, data=fields, files=files)

print("Upload status:", response.status_code)
```

## HTTP Status Codes

The API returns different HTTP status codes based on the processing outcome:

| Status Code | Description | Scenario |
|-------------|-------------|----------|
| 204 | Success | Files uploaded on presigned s3 url successfully |
| 403 | Failed | Policy Condition failed ( Policy is expired ) |