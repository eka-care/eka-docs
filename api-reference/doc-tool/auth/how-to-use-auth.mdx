# Getting Started with Eka API Authentication

These are the steps to authenticate and use Eka's API securely.

<Steps>
<Step title="Obtain an Access Token">

This step is used to authenticate and receive an access token for API access.

**Endpoint:** `POST {{AUTH_HOST}}/connect-auth/v1/account/login`

**Description:** Authenticate using your client credentials to receive an access token.

**Request Body:**
```json
{
    "client_id": "<client_id_assigned>",
    "client_secret": "<secret_key_assigned>"
}
```

**Response:**
```json
{
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5c1KlsXVCJ9.eyJleHAiOjE3MjMxMDk1NTIsImlhdCI6MTcyMzEwNzc1MiwiYy1pZCI6Im1ldHJvcG9saXMifQ.PdxjlgB3ZK4qGPdYwqfptAaZvBsGtSjqYLSN0wp1"
}
```

<Warning> The access token is valid for 30 minutes. </Warning>
</Step>

<Step title="Use the Access Token">

This step involves including the access token in the headers of all API requests.

**Example API Request:**
```bash
curl --location '{{HOST}}/api-suite/v1/any-endpoint' \
--header 'auth: eyJhbGciOiJIUzI1NiIsInR5c1KlsXVCJ9.eyJleHAiOjE3MjMxMDk1NTIsImlhdCI6MTcyMzEwNzc1MiwiYy1pZCI6Im1ldHJvcG9saXMifQ.PdxjlgB3ZK4qGPdYwqfptAaZvBsGtSjqYLSN0wp1' \
--header 'Content-Type: application/json'
```

**Description:** Include the access token in the `auth` header for all API requests to authenticate and gain access.
</Step>

<Step title="Handle Token Expiration">

This step involves managing token expiration and renewal to maintain continuous API access.

**Description:** Implement logic in your application to handle token expiration:
1. Track the token's expiration time (30 minutes from issuance).
2. Re-authenticate to obtain a new token before the current one expires.
3. Handle 401 Unauthorized errors by re-authenticating and obtaining a new token.

**Note:** Failing to renew the token will result in authentication errors for your API requests.
</Step>
</Steps>

---

## Overview

The Eka API Authentication process ensures secure access to sensitive healthcare data. It requires obtaining an access token, using it in all API requests, and managing token expiration. This guide provides the necessary steps and tips for third-party developers to interact with Eka's API securely and efficiently.

## Main Actors

- **Client Application:** The third-party application that interacts with Eka's API.
- **Eka API Gateway:** The server-side component that authenticates and processes API requests.

## Usage Notes

- Always keep your client credentials (client_id and client_secret) secure.
- Implement token renewal logic in your application to handle the 30-minute expiration automatically.
- Include the access token in the `auth` header for all API requests.
- Handle 401 Unauthorized errors gracefully by re-authenticating and obtaining a new token.
- Ensure your application complies with relevant privacy regulations when handling healthcare data.